CREATE TABLE public.usuarios (
	id int NOT NULL GENERATED BY DEFAULT AS IDENTITY,
	nome varchar NOT NULL,
	email varchar NOT NULL,
	senha varchar NOT NULL,
  cpf varchar NULL,
  telefone varchar NULL,
	CONSTRAINT users_pk PRIMARY KEY (id),
	CONSTRAINT users_un UNIQUE (email)
);

CREATE TABLE clientes (
	id int4 NOT NULL GENERATED BY DEFAULT AS IDENTITY,
	usuario_id int4 NOT NULL,
	nome varchar NOT NULL,
	email varchar NOT NULL,
	cpf varchar NOT NULL,
	telefone varchar NOT NULL,
	cep varchar NULL,
	logradouro varchar NULL,
	bairro varchar NULL,
	cidade varchar NULL,
	complemento varchar NULL,
	ponto_referencia varchar NULL,
	CONSTRAINT clientes_pk PRIMARY KEY (id)
  CONSTRAINT clientes_fk FOREIGN KEY (usuario_id) REFERENCES usuarios(id) ON DELETE CASCADE ON UPDATE CASCADE;
);

CREATE TABLE public.cobrancas (
id int NOT NULL GENERATED BY DEFAULT AS IDENTITY,
	cliente_id int NOT NULL,
	usuario_id int NOT NULL,
	vencimento date NULL,
	pago_em date NULL,
	created_at date NULL DEFAULT now(),
	CONSTRAINT cobrancas_pk PRIMARY KEY (id),
	CONSTRAINT cobrancas_fk FOREIGN KEY (usuario_id) REFERENCES public.usuarios(id) ON DELETE CASCADE ON UPDATE CASCADE,
	CONSTRAINT cobrancas_fk_1 FOREIGN KEY (cliente_id) REFERENCES public.clientes(id) ON DELETE CASCADE ON UPDATE CASCADE
);

